<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guruiot.kiosk.mapper.AccountMapper">

	<select id="selectAll" resultType="accountVO">
		SELECT *
		FROM account
	</select>
	
	<select id="selectMax" resultType="Integer">
		SELECT MAX(account.index)
		FROM account
	</select>
	
	<select id="selectUser" resultType="accountVO">
		SELECT *
		FROM account
		WHERE account.id = #{id}
	</select>
	
	<insert id="insert" parameterType="accountVO">
		INSERT INTO account (
			account.id, account.pw, account.name, account.grant, account.ip, account.state, account.join_log, account.log
		) VALUES (
			#{id}, #{pw}, #{name}, #{grant}, #{ip}, #{state}, now(), now()
		)
	</insert>
	
	<update id="update" parameterType="accountVO">
		UPDATE account SET
			account.pw = #{pw}, account.name = #{name}, account.grant = #{grant}, account.state = #{state}, account.log = now() 
		WHERE account.id = #{id}
	</update>
	
	<delete id="delete" parameterType="accountVO">
		UPDATE account SET
			account.state = #{state}, account.log = now() 
		WHERE account.id = #{id}
		<!-- DELETE FROM account
		WHERE account.id = #{account} -->
	</delete>
</mapper>